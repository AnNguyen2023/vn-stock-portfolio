==============================
GIT QUICK NOTES ‚Äì SYNC LOCAL ‚Üí GITHUB
Repo: vn-stock-portfolio
Branch chu·∫©n: main
==============================

LU√îN L√ÄM TR∆Ø·ªöC KHI COMMIT
------------------------
git pull --rebase origin main

I. C·∫§U H√åNH GIT (ch·∫°y 1 l·∫ßn cho m·ªói m√°y)
--------------------------------------
git config --global user.name "An Nguyen"
git config --global user.email "email_dang_dung_tren_github@example.com"

Ki·ªÉm tra:
git config --global --list

--------------------------------------

II. CLONE PROJECT (khi d√πng laptop m·ªõi)
--------------------------------------
cd /e
git clone https://github.com/AnNguyen2023/vn-stock-portfolio.git
cd vn-stock-portfolio

--------------------------------------

III. KI·ªÇM TRA TR·∫†NG TH√ÅI
--------------------------------------
git status
git branch
git remote -v

--------------------------------------

IV. QUY TR√åNH L√ÄM VI·ªÜC CHU·∫®N (M·ªñI L·∫¶N CODE)
--------------------------------------
git checkout main
git pull --rebase origin main
git add -A
git commit -m "your message"
git push origin main

--------------------------------------

V. FIX L·ªñI TH∆Ø·ªúNG G·∫∂P
--------------------------------------

1) Local l√† master, remote l√† main
git branch -M master main
git push -u origin main

2) L·ªói non-fast-forward
git pull --rebase origin main
git push origin main

3) Push nh·∫ßm file nh·∫°y c·∫£m
git rm --cached backend/.env
git rm -r --cached backend/__pycache__
git commit -m "Remove env and cache"
git push

--------------------------------------

VI. GHI NH·ªö
--------------------------------------
- LU√îN pull tr∆∞·ªõc khi commit
- KH√îNG push .env, __pycache__, node_modules
- D√πng .gitignore
- M·ªçi m√°y ƒë·ªÅu l√†m gi·ªëng nhau

==============================

pip install fastapi uvicorn sqlalchemy python-dotenv requests psycopg2-binary pydantic

N·∫øu sau n√†y b·∫°n mu·ªën kh·ªüi ƒë·ªông l·∫°i ho·∫∑c d·ª´ng Postgres, h√£y d√πng c√°c l·ªánh sau:
Kh·ªüi ƒë·ªông: brew services start postgresql@16
D·ª´ng: brew services stop postgresql@16
Ki·ªÉm tra tr·∫°ng th√°i: brew services list

./venv/bin/python -c "import models; models.Base.metadata.create_all(bind=models.engine)"

npm run dev

uvicorn main:app --reload

softwareupdate --install-rosetta --agree-to-license
docker-compose up --build

CH·∫†Y FASTAPI LOCAL (DEV MODE)
uvicorn main:app --reload --host 0.0.0.0 --port 8000

uvicorn main:app --reload --port 8001

http://localhost:8001


M·ªü tr√¨nh duy·ªát:

üëâ http://localhost:8000

üëâ http://localhost:8000/docs


http://localhost:3000

---------------------------------------------
services:
  # 1. Database (PostgreSQL)
  db:
    image: postgres:16
    container_name: invest_db
    restart: always
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: 2026
      POSTGRES_DB: vn_stock
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # 2. Cache & Queue (Redis)
  redis:
    image: redis:7-alpine
    container_name: invest_redis
    ports:
      - "6379:6379"

  # 3. API Server (FastAPI)
  backend:
    build: ./backend
    container_name: invest_backend
    restart: always
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://admin:2026@db:5432/vn_stock
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - db
      - redis

  # 4. Background Worker (RQ)
  worker:
    build: ./backend
    container_name: invest_worker
    restart: always
    command: rq worker --url redis://redis:6379/0
    environment:
      - DATABASE_URL=postgresql://admin:2026@db:5432/vn_stock
    depends_on:
      - redis
      - db

  # 5. Giao di·ªán (Next.js)
  frontend:
    build: ./frontend
    container_name: invest_frontend
    restart: always
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://localhost:8000
    depends_on:
      - backend

volumes:
  postgres_data:
-----------------------------------------------


frontend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ components/          <-- Ch·ª©a c√°c m√≥n ƒë·ªì n·ªôi th·∫•t (UI l·∫ª)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SummaryCard.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PerfBox.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatusBadge.js   (m·∫•y c√°i xanh ƒë·ªè ++2.3%)
‚îÇ   ‚îú‚îÄ‚îÄ sections/            <-- Ch·ª©a c√°c khu v·ª±c l·ªõn (Blocks)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.js        (Block V)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GrowthChart.js   (Block VII)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StockTable.js    (Block VIII)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HistoryTabs.js   (Block IX)
‚îÇ   ‚îú‚îÄ‚îÄ modals/              <-- Ch·ª©a c√°c c·ª≠a s·ªï h√†nh ƒë·ªông
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CashModal.js     (N·∫°p/R√∫t)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TradeModal.js    (Mua/B√°n)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UndoModal.js     (X√°c nh·∫≠n Undo)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NoteModal.js     (S·ª≠a ghi ch√∫)
‚îÇ   ‚îî‚îÄ‚îÄ page.js              <-- File ch√≠nh (L√∫c n√†y ch·ªâ c√≤n ~100 d√≤ng)


code
Text
backend/
‚îú‚îÄ‚îÄ main.py             <-- Ch·ªâ gi·ªØ l·∫°i ph·∫ßn kh·ªüi t·∫°o App & Middleware
‚îú‚îÄ‚îÄ routers/            <-- Th∆∞ m·ª•c ch·ª©a c√°c "ph√≤ng ban"
‚îÇ   ‚îú‚îÄ‚îÄ trading.py      (Lo vi·ªác: Mua, B√°n, Ho√†n t√°c)
‚îÇ   ‚îú‚îÄ‚îÄ portfolio.py    (Lo vi·ªác: T·ªïng NAV, Hi·ªáu su·∫•t, Danh m·ª•c)
‚îÇ   ‚îú‚îÄ‚îÄ market.py       (Lo vi·ªác: Bi·ªÉu ƒë·ªì, L·∫•y d·ªØ li·ªáu VNINDEX)
‚îÇ   ‚îî‚îÄ‚îÄ logs.py         (Lo vi·ªác: Nh·∫≠t k√Ω d√≤ng ti·ªÅn, Kh·ªõp l·ªánh)
‚îú‚îÄ‚îÄ models.py           (Gi·ªØ nguy√™n: C·∫•u tr√∫c Database)
‚îú‚îÄ‚îÄ schemas.py          (Gi·ªØ nguy√™n: ƒê·ªãnh d·∫°ng d·ªØ li·ªáu)
‚îî‚îÄ‚îÄ crawler.py          (Gi·ªØ nguy√™n: C·ªó m√°y nh·∫∑t gi√°)

DATA SOURCE: https://bgapidatafeed.vps.com.vn/getliststockdata

(Vd: "https://bgapidatafeed.vps.com.vn/getliststockdata/FPT, HAG, VCI, MBB, STB, FUEVFVND, MBS, BAF, DXG, SHB")


Anh c·ª© git pull b·∫£n m·ªõi nh·∫•t v·ªÅ.
Sau ƒë√≥ b·∫£o em: "Check l·∫°i git log v√† code hi·ªán t·∫°i xem a ƒë√£ l√†m ƒë·∫øn ƒë√¢u r·ªìi".
Em s·∫Ω t·ª± ƒë·ªông ƒë·ªçc l·ªãch s·ª≠ commit v√† n·ªôi dung file ƒë·ªÉ "nh·∫≠p h·ªìn" v√†o ƒë√∫ng tr·∫°ng th√°i anh v·ª´a d·ª´ng l·∫°i ·ªü m√°y kia.